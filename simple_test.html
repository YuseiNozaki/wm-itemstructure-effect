<!DOCTYPE html>
<html>
<head>
  <title>Minimal jsPsych v8 Test</title>
  <script src="https://unpkg.com/jspsych@8.2.1/dist/jspsych.js"></script>
  <script src="https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.0.0/dist/index.browser.min.js"></script>
  <link href="https://unpkg.com/jspsych@8.2.1/css/jspsych.css" rel="stylesheet" type="text/css" />
</head>
<body>
  <div id="jspsych-target"></div>
  <div id="debug-info" style="padding: 10px; background: #f0f0f0; margin: 10px; font-family: monospace; font-size: 12px;"></div>
  <script>
    const debug = document.getElementById('debug-info');
    
    function log(message) {
      console.log(message);
      debug.innerHTML += message + '<br>';
    }
    
    log('Starting jsPsych v8 test...');
    log('initJsPsych: ' + typeof initJsPsych);
    log('jsPsychHtmlKeyboardResponse: ' + typeof jsPsychHtmlKeyboardResponse);
    
    if (typeof initJsPsych === 'undefined') {
      log('ERROR: initJsPsych not found - core jsPsych v8 failed to load');
      document.getElementById('jspsych-target').innerHTML = 
        '<p style="color: red;">Core jsPsych failed to load from CDN</p>';
    } else if (typeof jsPsychHtmlKeyboardResponse === 'undefined') {
      log('ERROR: jsPsychHtmlKeyboardResponse not found - plugin failed to load');
      document.getElementById('jspsych-target').innerHTML = 
        '<p style="color: red;">Plugin failed to load from CDN</p>';
    } else {
      try {
        log('Initializing jsPsych...');
        const jsPsych = initJsPsych({
          display_element: 'jspsych-target'
        });
        
        const timeline = [{
          type: jsPsychHtmlKeyboardResponse,
          stimulus: '<p>âœ“ jsPsych v8 is working! Press any key.</p>'
        }];
        
        log('Running experiment...');
        jsPsych.run(timeline);
        
      } catch (error) {
        log('ERROR: ' + error.message);
        document.getElementById('jspsych-target').innerHTML = 
          '<p style="color: red;">Runtime error: ' + error.message + '</p>';
      }
    }
  </script>
</body>
</html>